# Coded TeraSort
Application of single parity check single-parity-check (SPC) codes to distributed key-value (KV) pair sorting algorithm ([TeraSort](http://sortbenchmark.org/YahooHadoop.pdf)). 

## Requirements
- C++ compiler (g++)
- Open MPI up to v.2.1 (tested with Open MPI v.1.10.2)

## Execution instructions

### MapReduce parameters
You should first set the number of MPI server processes (not including the master). This is the variable `numReducer` in `CodedConfiguration.h`.  At the same file, choose the parameters `k`,`q` such that the number of servers is `K=kq`. The Open MPI hostfile of the master machine should contain the hostnames of the computing servers or you can manually specify a hostfile when running the code.  

### Files and file paths
The data set file of the key-value (KV) pairs to be sorted should be set in the `inputPath` directory of `CodedConfiguration.h`.  Each line of this file is a 10-byte key followed by a 90-byte value and can be generated by [Hadoop's](http://hadoop.apache.org/) TeraGen utility.  For demonstration purposes, we have included a data set of 10000 KV pairs, named `Input10000`.  The path `outputPath` should exist on all servers. Finally, you should choose the number of KV samples picked for partitioning of the key domain. 

### TeraSort Execution
Run `make` to compile `CodedTeraSort`.

Run `mpirun -mca btl ^openib -mca plm_rsh_no_tree_spawn 1 ./InputPlacement` to split the data set and place the subfiles to the server machines.

Run `mpirun -mca btl ^openib -mca plm_rsh_no_tree_spawn 1 ./CodedTeraSort` to execute the algorithm.

## Citation
If you use this code, please cite our Globecom 2018 [paper](https://ieeexplore.ieee.org/document/8647133):

  
```
@INPROCEEDINGS{8647133, 
author={K. {Konstantinidis} and A. {Ramamoorthy}}, 
booktitle={2018 IEEE Global Communications Conference (GLOBECOM)}, 
title={Leveraging Coding Techniques for Speeding up Distributed Computing}, 
year={2018}, 
volume={}, 
number={}, 
pages={1-6}, 
keywords={Servers;Task analysis;Sparks;Distributed databases;Protocols;3G mobile communication}, 
doi={10.1109/GLOCOM.2018.8647133}, 
ISSN={2576-6813}, 
month={Dec},}
```